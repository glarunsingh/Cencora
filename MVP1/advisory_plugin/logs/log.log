2024-06-26 18:18:19  advisory_db.py  Line: 129  INFO  Function_Name: query_items  
Querying from news_data for given Advisory

2024-06-26 18:18:47  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:18:47  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-26 18:18:48  advisory_db.py  Line: 144  INFO  Function_Name: query_items  Count of items extracted: 2
2024-06-26 18:20:16  advisory_db.py  Line: 199  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-06-26 18:20:19  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:20:20  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-06-26 18:20:20  advisory_db.py  Line: 106  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-06-26 18:20:23  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:20:23  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-26 18:20:28  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/25/dia-takeaways
2024-06-26 18:20:40  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/25/sarepta-approval
2024-06-26 18:20:46  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/25/loneliness
2024-06-26 18:20:52  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/25/around-the-nation
2024-06-26 18:20:57  advisory.py  Line: 146  INFO  Function_Name: get_news_data  Saving becker data to db...
2024-06-26 18:20:58  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:20:58  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-26 18:20:58  advisory_db.py  Line: 88  INFO  Function_Name: upsert_items  Adding/Updating Items to container news_data

2024-06-26 18:21:00  advisory_db.py  Line: 93  INFO  Function_Name: upsert_items  data uploaded to DB
2024-06-26 18:21:00  advisory_app.py  Line: 101  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-06-26 18:23:42  advisory_db.py  Line: 158  INFO  Function_Name: query_excel_items  Querying for items in database to load to excel
2024-06-26 18:23:45  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:23:45  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-26 18:23:45  advisory_db.py  Line: 180  ERROR  Function_Name: query_excel_items  Failed to extract data from DB.Error querying data- Line No: 163  Error: name 'client_name' is not defined
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 149, in download_excel
    final_data = db_ops.query_excel_items(input_dates,fetch.source_name)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_db.py", line 180, in query_excel_items
    logger.error(f"Failed to extract data from DB.Error querying data- "
2024-06-26 18:23:45  advisory_app.py  Line: 171  ERROR  Function_Name: download_excel  Line No: 149  Error: 
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 171, in download_excel
    logger.error(f"Line No: {exc_tb.tb_lineno}  Error: {str(e)}", stack_info=True)
2024-06-26 18:25:17  advisory_db.py  Line: 158  INFO  Function_Name: query_excel_items  Querying for items in database to load to excel
2024-06-26 18:25:18  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:25:18  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-26 18:25:19  advisory_db.py  Line: 180  ERROR  Function_Name: query_excel_items  Failed to extract data from DB.Error querying data- Line No: 163  Error: name 'client_name' is not defined
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 149, in download_excel
    final_data = db_ops.query_excel_items(input_dates,fetch.source_name)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_db.py", line 180, in query_excel_items
    logger.error(f"Failed to extract data from DB.Error querying data- "
2024-06-26 18:25:19  advisory_app.py  Line: 171  ERROR  Function_Name: download_excel  Line No: 149  Error: 
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 171, in download_excel
    logger.error(f"Line No: {exc_tb.tb_lineno}  Error: {str(e)}", stack_info=True)
2024-06-26 18:29:47  advisory_db.py  Line: 158  INFO  Function_Name: query_excel_items  Querying for items in database to load to excel
2024-06-26 18:29:50  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-26 18:29:50  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-26 18:29:50  advisory_db.py  Line: 163  INFO  Function_Name: query_excel_items  
Querying from news_data for given advisory

2024-06-26 18:29:51  advisory_db.py  Line: 174  INFO  Function_Name: query_excel_items  Items queried! Container: news_data 
2024-06-26 18:29:51  advisory_app.py  Line: 163  INFO  Function_Name: download_excel  Excel file created: ./temp\BeckerHospital_20240626182951.xlsx Total Time: 3.7340686321258545
2024-06-26 18:31:51  custom_functions.py  Line: 92  INFO  Function_Name: delete_file_after_delay  File deleted after 120 seconds: ./temp\BeckerHospital_20240626182951.xlsx
2024-06-27 11:56:29  advisory_db.py  Line: 199  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-06-27 11:56:33  advisory_db.py  Line: 214  ERROR  Function_Name: query_keyword_list  Exception occured while fetching keywords. Line No: 201  Error: (Forbidden) Request originated from IP 103.195.202.107 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: f4b1c755-30ac-440b-b94b-1c08bc970053, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Code: Forbidden
Message: Request originated from IP 103.195.202.107 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: f4b1c755-30ac-440b-b94b-1c08bc970053, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    return {'success': False, 'message': "Unable to download excel file"}
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 92, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 81, in get_news_data
    k_list = keyword_db_ops.query_keyword_list(department_name)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_db.py", line 214, in query_keyword_list
    logger.error(f"Exception occured while fetching keywords. "
2024-06-27 11:56:33  advisory_db.py  Line: 106  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-06-27 11:56:35  advisory_db.py  Line: 120  ERROR  Function_Name: query_url  Exception occured while extracting urls from DB. Line No: 108  Error: (Forbidden) Request originated from IP 103.195.202.107 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: d98c19f8-92ce-46b1-8161-20f4d54afcc6, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Code: Forbidden
Message: Request originated from IP 103.195.202.107 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: d98c19f8-92ce-46b1-8161-20f4d54afcc6, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    return {'success': False, 'message': "Unable to download excel file"}
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 92, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 83, in get_news_data
    url_list = db_ops.query_url(source_name)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_db.py", line 120, in query_url
    logger.error(f"Exception occured while extracting urls from DB."
2024-06-27 11:56:39  advisory.py  Line: 140  ERROR  Function_Name: get_news_data  Error in scraping the contents Line No: 95  Error: argument of type 'NoneType' is not iterable
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    return {'success': False, 'message': "Unable to download excel file"}
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 92, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 140, in get_news_data
    logger.error(f"Error in scraping the contents Line No:"
2024-06-27 11:56:39  advisory_app.py  Line: 101  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-06-27 11:59:33  advisory_db.py  Line: 199  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-06-27 11:59:35  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-27 11:59:35  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-06-27 11:59:36  advisory_db.py  Line: 106  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-06-27 11:59:38  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-27 11:59:38  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-27 11:59:41  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/26/cancer-rates
2024-06-27 11:59:48  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/26/ahip-2024
2024-06-27 11:59:54  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/26/around-the-nation
2024-06-27 11:59:58  advisory.py  Line: 146  INFO  Function_Name: get_news_data  Saving becker data to db...
2024-06-27 11:59:59  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-27 11:59:59  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-27 11:59:59  advisory_db.py  Line: 88  INFO  Function_Name: upsert_items  Adding/Updating Items to container news_data

2024-06-27 12:00:00  advisory_db.py  Line: 93  INFO  Function_Name: upsert_items  data uploaded to DB
2024-06-27 12:00:00  advisory_app.py  Line: 101  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-06-27 20:11:28  advisory_db.py  Line: 199  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-06-27 20:11:31  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-27 20:11:31  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-06-27 20:11:32  advisory_db.py  Line: 106  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-06-27 20:11:34  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-27 20:11:34  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-27 20:11:37  advisory.py  Line: 96  INFO  Function_Name: get_news_data  Skipping the scraping for already existing url https://www.advisory.com/daily-briefing/2024/06/26/cancer-rates
2024-06-27 20:11:37  advisory.py  Line: 96  INFO  Function_Name: get_news_data  Skipping the scraping for already existing url https://www.advisory.com/daily-briefing/2024/06/26/ahip-2024
2024-06-27 20:11:37  advisory.py  Line: 96  INFO  Function_Name: get_news_data  Skipping the scraping for already existing url https://www.advisory.com/daily-briefing/2024/06/26/around-the-nation
2024-06-27 20:11:37  advisory_app.py  Line: 101  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-06-27 20:11:37  base_events.py  Line: 1785  ERROR  Function_Name: default_exception_handler  Exception in callback _ProactorBasePipeTransport._call_connection_lost(None)
handle: <Handle _ProactorBasePipeTransport._call_connection_lost(None)>
Traceback (most recent call last):
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\proactor_events.py", line 165, in _call_connection_lost
    self._sock.shutdown(socket.SHUT_RDWR)
ConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host
2024-06-28 12:23:19  advisory_db.py  Line: 199  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-06-28 12:23:21  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-28 12:23:22  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-06-28 12:23:22  advisory_db.py  Line: 106  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-06-28 12:23:25  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-28 12:23:25  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-28 12:23:30  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/27/emtala-case
2024-06-28 12:23:37  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/27/healthcare-prices-ec
2024-06-28 12:23:45  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/27/lown-rankings
2024-06-28 12:23:54  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/27/virtual-care-sponsored
2024-06-28 12:23:59  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/27/around-the-nation
2024-06-28 12:24:04  advisory.py  Line: 146  INFO  Function_Name: get_news_data  Saving becker data to db...
2024-06-28 12:24:04  advisory_db.py  Line: 42  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-06-28 12:24:05  advisory_db.py  Line: 59  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-06-28 12:24:05  advisory_db.py  Line: 88  INFO  Function_Name: upsert_items  Adding/Updating Items to container news_data

2024-06-28 12:24:06  advisory_db.py  Line: 93  INFO  Function_Name: upsert_items  data uploaded to DB
2024-06-28 12:24:06  advisory_app.py  Line: 101  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-07-01 11:07:19  advisory_db.py  Line: 199  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-07-01 11:07:22  advisory_db.py  Line: 214  ERROR  Function_Name: query_keyword_list  Exception occured while fetching keywords. Line No: 201  Error: (Forbidden) Request originated from IP 45.119.30.60 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: 9bb7ce16-fe1d-4004-81fa-55e2412cfb78, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Code: Forbidden
Message: Request originated from IP 45.119.30.60 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: 9bb7ce16-fe1d-4004-81fa-55e2412cfb78, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    return {'success': False, 'message': "Unable to download excel file"}
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 92, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 81, in get_news_data
    k_list = keyword_db_ops.query_keyword_list(department_name)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_db.py", line 214, in query_keyword_list
    logger.error(f"Exception occured while fetching keywords. "
2024-07-01 11:07:22  advisory_db.py  Line: 106  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-07-01 11:07:25  advisory_db.py  Line: 120  ERROR  Function_Name: query_url  Exception occured while extracting urls from DB. Line No: 108  Error: (Forbidden) Request originated from IP 45.119.30.60 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: 4ea7847d-6ae5-4807-ac21-86a357430ebf, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Code: Forbidden
Message: Request originated from IP 45.119.30.60 through public internet. This is blocked by your Cosmos DB account firewall settings. More info: https://aka.ms/cosmosdb-tsg-forbidden
ActivityId: 4ea7847d-6ae5-4807-ac21-86a357430ebf, documentdb-dotnet-sdk/2.14.0 Host/64-bit MicrosoftWindowsNT/10.0.20348.0
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    return {'success': False, 'message': "Unable to download excel file"}
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 92, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 83, in get_news_data
    url_list = db_ops.query_url(source_name)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_db.py", line 120, in query_url
    logger.error(f"Exception occured while extracting urls from DB."
2024-07-01 11:07:28  advisory.py  Line: 140  ERROR  Function_Name: get_news_data  Error in scraping the contents Line No: 95  Error: argument of type 'NoneType' is not iterable
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 175, in <module>
    return {'success': False, 'message': "Unable to download excel file"}
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 92, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 140, in get_news_data
    logger.error(f"Error in scraping the contents Line No:"
2024-07-01 11:07:28  advisory_app.py  Line: 101  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-07-01 11:46:57  advisory_db.py  Line: 198  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-07-01 11:46:59  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 11:47:00  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-07-01 11:47:00  advisory_db.py  Line: 105  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-07-01 11:47:03  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 11:47:03  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-07-01 11:47:07  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/28/debate
2024-07-01 11:47:11  _base_client.py  Line: 952  INFO  Function_Name: _retry_request  Retrying request to /chat/completions in 0.907358 seconds
2024-07-01 11:47:13  _base_client.py  Line: 952  INFO  Function_Name: _retry_request  Retrying request to /chat/completions in 1.516243 seconds
2024-07-01 11:47:16  advisory_summary.py  Line: 66  ERROR  Function_Name: get_summ_sent_key  Failed to generate response from LLM.Line No: 61  Error: Connection error.
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 180, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 93, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 122, in get_news_data
    llm_response = await get_summ_sent_key(content,url,k_list=k_list)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_summary.py", line 66, in get_summ_sent_key
    logger.error(f"Failed to generate response from LLM.Line No: {exc_tb.tb_lineno}  Error: {str(e)}", stack_info=True)
2024-07-01 11:47:16  advisory.py  Line: 140  ERROR  Function_Name: get_news_data  Error in scraping the contents Line No: 132  Error: 'NoneType' object is not subscriptable
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 180, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 93, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 140, in get_news_data
    logger.error(f"Error in scraping the contents Line No:"
2024-07-01 11:47:16  advisory_app.py  Line: 104  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-07-01 11:47:54  advisory_db.py  Line: 128  INFO  Function_Name: query_items  
Querying from news_data for given Advisory

2024-07-01 11:48:10  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 11:48:10  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-07-01 11:48:11  advisory_db.py  Line: 143  INFO  Function_Name: query_items  Count of items extracted: 5
2024-07-01 11:48:49  advisory_db.py  Line: 128  INFO  Function_Name: query_items  
Querying from news_data for given advisory

2024-07-01 11:48:49  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 11:48:50  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-07-01 11:48:50  advisory_db.py  Line: 143  INFO  Function_Name: query_items  Count of items extracted: 15
2024-07-01 11:57:47  advisory_db.py  Line: 198  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-07-01 11:57:53  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 11:57:53  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-07-01 11:57:53  advisory_db.py  Line: 105  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-07-01 11:57:56  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 11:57:56  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-07-01 11:58:01  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/28/debate
2024-07-01 11:58:05  _base_client.py  Line: 952  INFO  Function_Name: _retry_request  Retrying request to /chat/completions in 0.976699 seconds
2024-07-01 11:58:07  _base_client.py  Line: 952  INFO  Function_Name: _retry_request  Retrying request to /chat/completions in 1.710014 seconds
2024-07-01 11:58:10  advisory_summary.py  Line: 66  ERROR  Function_Name: get_summ_sent_key  Failed to generate response from LLM.Line No: 61  Error: Connection error.
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 180, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 93, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 122, in get_news_data
    llm_response = await get_summ_sent_key(content,url,k_list=k_list)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_summary.py", line 66, in get_summ_sent_key
    logger.info("repsonse from LLM generated")
2024-07-01 11:58:10  advisory.py  Line: 140  ERROR  Function_Name: get_news_data  Error in scraping the contents Line No: 132  Error: 'NoneType' object is not subscriptable
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 180, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 93, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 140, in get_news_data
    logger.error(f"Error in scraping the contents Line No:"
2024-07-01 11:58:10  advisory_app.py  Line: 104  INFO  Function_Name: advisory_news  Data extracted succesfully!
2024-07-01 13:02:05  advisory_db.py  Line: 128  INFO  Function_Name: query_items  
Querying from news_data for given advisory

2024-07-01 13:02:10  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 13:02:10  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-07-01 13:02:10  advisory_db.py  Line: 143  INFO  Function_Name: query_items  Count of items extracted: 20
2024-07-01 13:17:16  advisory_db.py  Line: 198  INFO  Function_Name: query_keyword_list  
Querying keyword list from Keyword_information for Health

2024-07-01 13:17:46  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 13:17:47  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'Keyword_information' was found
2024-07-01 13:17:47  advisory_db.py  Line: 105  INFO  Function_Name: query_url  Extracting url list for source advisory
2024-07-01 13:17:51  advisory_db.py  Line: 41  INFO  Function_Name: create_db  Database with id 'keyaccount_digest_db' was found
2024-07-01 13:17:51  advisory_db.py  Line: 58  INFO  Function_Name: create_db_container  Container with id 'news_data' was found
2024-07-01 13:17:57  advisory.py  Line: 99  INFO  Function_Name: get_news_data  Extracting data for https://www.advisory.com/daily-briefing/2024/06/28/debate
2024-07-01 13:19:04  advisory_summary.py  Line: 62  INFO  Function_Name: get_summ_sent_key  Generating repsonse from LLM
2024-07-01 13:19:06  _base_client.py  Line: 952  INFO  Function_Name: _retry_request  Retrying request to /chat/completions in 0.786797 seconds
2024-07-01 13:19:08  _base_client.py  Line: 952  INFO  Function_Name: _retry_request  Retrying request to /chat/completions in 1.509737 seconds
2024-07-01 13:19:13  advisory_summary.py  Line: 70  ERROR  Function_Name: get_summ_sent_key  Failed to generate response from LLM.Line No: 63  Error: Connection error.
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 180, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 93, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 122, in get_news_data
    llm_response = await get_summ_sent_key(content,url,k_list=k_list)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory_summary.py", line 70, in get_summ_sent_key
    logger.error(f"Failed to generate response from LLM.Line No: {exc_tb.tb_lineno}  Error: {str(e)}", stack_info=True)
2024-07-01 13:19:13  advisory.py  Line: 140  ERROR  Function_Name: get_news_data  Error in scraping the contents Line No: 132  Error: 'NoneType' object is not subscriptable
Stack (most recent call last):
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 180, in <module>
    uvicorn.run('advisory_app:app',host="127.0.0.1",port=8000, reload=False)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\main.py", line 587, in run
    server.run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 641, in run_until_complete
    self.run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 608, in run_forever
    self._run_once()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\base_events.py", line 1936, in _run_once
    handle._run()
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\asyncio\events.py", line 84, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\applications.py", line 116, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 746, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 75, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\_exception_handler.py", line 44, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\starlette\routing.py", line 70, in app
    response = await func(request)
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
  File "C:\Users\866246\AppData\Local\anaconda3\envs\jnj_test\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\advisory_app.py", line 93, in advisory_news
    json_data = await scrape.get_news_data(department_name=department_name,
  File "C:\Users\866246\OneDrive - Cognizant\Documents\Cencora\advisory_plugin\utils\advisory.py", line 140, in get_news_data
    logger.error(f"Error in scraping the contents Line No:"
2024-07-01 13:19:13  advisory_app.py  Line: 104  INFO  Function_Name: advisory_news  Data extracted succesfully!
